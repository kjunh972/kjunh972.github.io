<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>깜빡 (kkambbak) - 초보자 중심 실생활 기반 한국어 학습 서비스 | Kim Jun Hyeong</title>
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/project-detail.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
</head>
<body>
    <div id="sidebar-placeholder"></div>

    <main class="content">
        <section class="project-detail-page">
            <div class="project-header">
                <h1>깜빡 (kkambbak)</h1>
                <p class="project-period">2025.09 - 2025.11</p>
                <p class="project-type">초보자 중심 실생활 기반 한국어 학습 서비스 (스위프 11기 - 개발 팀장/백엔드)</p>
                <div class="project-links">
                    <a href="https://kkam-bbak.pages.dev" target="_blank" class="deployment-link">
                        <i class="fas fa-external-link-alt"></i> 서비스 바로가기
                    </a>
                </div>
            </div>

            <div class="project-content">
                <div class="detail-info">
                    <h4>프로젝트 개요</h4>
                    <p class="project-intro">K-콘텐츠로 한국어에 대한 관심은 커졌지만 초보자가 발음, 문법 난이도를 넘지 못해 학습을 포기하는 문제를 해결하기 위해 한국어에 관심 있는 외국인을 대상으로 실생활 기반의 한국어 학습 서비스입니다. </p>

                    <h4>서비스 화면</h4>
                    <div class="project-images">
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/login.png" alt="로그인">
                            <p class="kkambbak-screenshot-caption">로그인</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/otp.png" alt="OTP 인증">
                            <p class="kkambbak-screenshot-caption">OTP 인증</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/profile_creation.png" alt="회원가입">
                            <p class="kkambbak-screenshot-caption">회원가입</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/korean_name.png" alt="한국어 이름 생성">
                            <p class="kkambbak-screenshot-caption">한국어 이름 생성</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/survey.png" alt="사용자 설문">
                            <p class="kkambbak-screenshot-caption">사용자 설문</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/learning.png" alt="학습 진행">
                            <p class="kkambbak-screenshot-caption">학습 진행</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/roleplay.png" alt="롤플레이 진행">
                            <p class="kkambbak-screenshot-caption">롤플레이 진행</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/payment.png" alt="결제">
                            <p class="kkambbak-screenshot-caption">결제</p>
                        </div>
                        <div class="kkambbak-screenshot">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/profile.png" alt="프로필">
                            <p class="kkambbak-screenshot-caption">사용자 프로필</p>
                        </div>
                    </div>

                    <h4>팀 구성 및 역할</h4>
                    <div class="team-grid">
                        <div class="team-card">
                            <h5><i class="fas fa-tasks"></i> PM</h5>
                            <p class="member-name"><strong>1명</strong></p>
                        </div>
                        <div class="team-card">
                            <h5><i class="fas fa-palette"></i> Designer</h5>
                            <p class="member-name"><strong>1명</strong></p>
                        </div>
                        <div class="team-card">
                            <h5><i class="fas fa-laptop-code"></i> Frontend</h5>
                            <p class="member-name"><strong>2명</strong></p>
                        </div>
                        <div class="team-card">
                            <h5><i class="fas fa-server"></i> Backend</h5>
                            <p class="member-name"><strong>김준형(개발 팀장) 외 2명</strong></p>
                        </div>
                    </div>

                    <h4>아키텍처 설계</h4>
                    <div class="architecture-section">
                        <h5>시스템 아키텍처</h5>
                        <div class="architecture-diagram">
                            <img src="https://raw.githubusercontent.com/kkam-bbak/kkambbak/main/images/kkambbak-Architecture.png" alt="kkambbak 시스템 아키텍처" class="architecture-image">
                        </div>

                        <h5>멀티모듈 구조</h5>
                        <div class="architecture-diagram">
                            <pre>
kkambbak-backend/
  ├── kkambbak (Main API Module)
  │   └── REST API, 비즈니스 로직
  ├── kkambbak-core (Domain & Repository Module)
  │   └── JPA 엔티티, 레포지토리
  ├── kkambbak-client (External Services Integration Module)
  │   └── 외부 서비스 클라이언트 (R2, Azure, OpenAI, KakaoPay, Discord 등)
  └── kkambbak-scheduler (Background Jobs Module)
      └── 스케줄러
                            </pre>
                        </div>

                        <h5>설계 이유</h5>
                        <p>멀티 모듈 구조로 계층을 분리한 확장 가능한 아키텍처를 설계했습니다. 각 계층이 명확하게 분리되어 외부 서비스 변경이나 새로운 기능 추가 시 영향 범위를 최소화할 수 있습니다. 데이터 계층 (kkambbak-core)을 중앙화해서 모든 모듈이 일관된 데이터 모델을 사용합니다.</p>
                        <ul>
                            <li><strong>외부 의존성 격리 (kkambbak-client):</strong> 외부 서비스 클라이언트를 별도 모듈에서 관리<br>
                                → 서비스 변경 시 영향 범위 최소화, 새로운 서비스 추가/변경이 간단함</li>

                            <li><strong>독립적 배포 (API + Scheduler):</strong> Docker Compose에서 별도 이미지로 구성<br>
                                → API 서버는 빠른 응답에, Scheduler는 배경작업 처리에 리소스 최적화</li>

                            <li><strong>공유 코어 모듈 (kkambbak-core):</strong> JPA 엔티티, Repository 중앙화<br>
                                → 순환 의존성 방지 + 데이터 계층 일관성 보장</li>
                        </ul>

                        <h5>인프라 구성</h5>
                        <ul>
                            <li><strong>웹 서버:</strong> Nginx (80/443 포트, SSL/TLS 처리, 리버스 프록시)</li>
                            <li><strong>애플리케이션:</strong> Spring Boot API + Scheduler 서비스</li>
                            <li><strong>데이터베이스:</strong> PostgreSQL + Redis</li>
                            <li><strong>모니터링:</strong> Prometheus (메트릭 수집) + Loki (로그 저장) + Grafana (시각화) + Promtail (로그 수집)</li>
                            <li><strong>클라우드:</strong> Naver Cloud Platform + Neon (Database) + Cloudflare R2 (Storage)</li>
                        </ul>
                    </div>

                    <h4>기술 스택</h4>
                    <div class="tech-stack">
                        <div class="tech-category">
                            <h5>Backend</h5>
                            <div class="tech-badges">
                                <span class="tech-badge">Spring Boot</span>
                                <span class="tech-badge">Spring Security</span>
                                <span class="tech-badge">Java</span>
                                <span class="tech-badge">OAuth2.0</span>
                                <span class="tech-badge">JWT</span>
                                <span class="tech-badge">PostgreSQL</span>
                                <span class="tech-badge">JPA</span>
                                <span class="tech-badge">QueryDSL</span>
                                <span class="tech-badge">Redis</span>
                                <span class="tech-badge">Scheduler</span>
                                <span class="tech-badge">Spring REST Docs</span>
                            </div>
                        </div>
                        <div class="tech-category">
                            <h5>DevOps & Monitoring</h5>
                            <div class="tech-badges">
                                <span class="tech-badge">Ubuntu</span>
                                <span class="tech-badge">Docker</span>
                                <span class="tech-badge">Docker Compose</span>
                                <span class="tech-badge">Git</span>
                                <span class="tech-badge">GitHub Actions</span>
                                <span class="tech-badge">Prometheus</span>
                                <span class="tech-badge">Loki</span>
                                <span class="tech-badge">Grafana</span>
                                <span class="tech-badge">Promtail</span>
                            </div>
                        </div>
                    </div>

                    <h4>담당 업무</h4>
                    <div class="feature-grid">
                        <div class="feature-card">
                            <h5><i class="fas fa-sign-in-alt"></i> 회원/ 인증 관리</h5>
                            <ul>
                                <li>구글 OAuth2 소셜 로그인 구현</li>
                                <li>게스트 로그인 기능 구현</li>
                                <li>게스트 계정 → 구글 계정 업그레이드 기능</li>
                                <li>JWT 기반 토큰 관리 및 인증 처리</li>
                                <li>이메일 OTP 인증 시스템 구현</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h5><i class="fas fa-credit-card"></i> 결제 시스템</h5>
                            <ul>
                                <li>KakaoPay 결제 API 연동</li>
                                <li>결제 생성, 승인, 취소 기능 구현</li>
                                <li>결제 내역 조회</li>
                                <li>구독 관리 시스템 구현</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h5><i class="fas fa-image"></i> 파일 관리</h5>
                            <ul>
                                <li>이미지 업로드 기능 구현</li>
                                <li>파일 저장 및 관리 시스템</li>
                                <li>이미지 조회 api 구현</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h5><i class="fas fa-hands-helping"></i> Frontend 지원</h5>
                            <ul>
                                <li>프론트엔드 팀원 탈주 후 FE 업무 지원</li>
                                <li>로그인 페이지 구현 (구글 소셜 로그인, 게스트 로그인)</li>
                                <li>메일 인증 및 회원가입 UI 구현</li>
                                <li>토큰 관리 로직 구현</li>
                                <li>롤플레이 API 연동 구현</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h5><i class="fas fa-clock"></i> Scheduler 시스템</h5>
                            <ul>
                                <li>OTP 만료 처리</li>
                                <li>구독 자동 갱신</li>
                                <li>갱신 실패 재시도</li>
                                <li>구독 만료 처리</li>
                                <li>만료 알림 발송</li>
                                <li>AOP 기반 모니터링 및 에러 처리</li>
                            </ul>
                        </div>
                        <div class="feature-card">
                            <h5><i class="fas fa-user-tie"></i> 개발 팀장 역할</h5>
                            <ul>
                                <li>백엔드 3명 관리 및 프론트엔드 팀과의 협업 조율</li>
                                <li>기술 스택 선정, 코드 리뷰, 개발 표준 수립</li>
                                <li>멀티모듈 구조 설계 및 아키텍처 설계</li>
                                <li>Naver Cloud Platform, Neon, Cloudflare R2 활용한 서버 배포 및 인프라 구축 및 관리</li>
                                <li>Discord 알림 시스템 구축 (결제 내역, 스케줄러 성공/실패, 배포 성공/실패, 운영서버 500에러 등)으로 개발자의 빠른 대응 및 업무 효율성 향상</li>
                                <li>Prometheus, Grafana, Loki, Promtail 기반 실시간 모니터링 시스템 구축으로 운영 안정성 확보</li>
                            </ul>
                        </div>
                    </div>

                    <h4>성능 개선 및 운영 안정화 경험</h4>
                    <div class="challenge-list">
                        <div class="challenge-item">
                            <h5><i class="fas fa-lock"></i> 게스트 계정 → Google 로그인 업그레이드 시 동시성 제어</h5>
                            <div class="optimization-details">
                                <div class="detail-section problem">
                                    <h6><i class="fas fa-exclamation-triangle"></i> <strong>문제상황</strong></h6>
                                    <ul>
                                        <li>단시간 내 중복된 로그인 요청 발생 시 같은 게스트 계정이 여러 번 업그레이드 시도</li>
                                        <li>여러 사용자가 동일한 게스트 계정으로 Google 로그인 시도 시 데이터 불일치 위험</li>
                                        <li>게스트 계정이 이미 업그레이드되었는지 확인하지 않고 재업그레이드 시도</li>
                                    </ul>
                                </div>
                                <div class="detail-section solution">
                                    <h6><i class="fas fa-wrench"></i> <strong>해결방법</strong></h6>
                                    <ul>
                                        <li><strong>비관적 락:</strong> 게스트 업그레이드 시 비관적 락으로 한 번에 한 스레드만 게스트 계정에 접근 허용</li>
                                        <li><strong>멱등성 검사:</strong> 업그레이드 전에 게스트의 현재 상태 확인 후 이미 업그레이드된 경우 안전하게 정보만 업데이트</li>
                                    </ul>
                                </div>
                                <div class="detail-section result">
                                    <h6><i class="fas fa-chart-line"></i> <strong>성과</strong></h6>
                                    <ul>
                                        <li>단시간 내 중복된 로그인 요청 발생 시 단일 트랜잭션으로 안전 처리</li>
                                        <li>비관적 락으로 동시 로그인 순차 처리</li>
                                        <li>비관적 락과 멱등성 검사로 동시 로그인 안전하게 처리</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-item">
                            <h5><i class="fas fa-user-times"></i> OAuth2 기반 소셜 로그인 중복 계정 생성 방지</h5>
                            <div class="optimization-details">
                                <div class="detail-section problem">
                                    <h6><i class="fas fa-exclamation-triangle"></i> <strong>문제상황</strong></h6>
                                    <ul>
                                        <li>Google OAuth 콜백 처리 시 동일 사용자의 동시 로그인 요청으로 중복 계정 생성</li>
                                        <li>네트워크 지연, 브라우저 재시도 등으로 같은 provider_id에 대한 INSERT 쿼리가 동시 실행</li>
                                        <li>동시 로그인 요청으로 같은 Google 계정이 여러 개의 User 레코드로 저장될 수 있음</li>
                                    </ul>
                                </div>
                                <div class="detail-section solution">
                                    <h6><i class="fas fa-wrench"></i> <strong>해결방법</strong></h6>
                                    <ul>
                                        <li>데이터베이스에 provider + provider_id 복합 유니크 제약으로 DB 레벨 중복 방지</li>
                                        <li>UNIQUE 제약 위반 예외 발생 시 기존 사용자를 새로운 트랜잭션에서 재조회</li>
                                        <li>@Transactional(propagation = Propagation.REQUIRES_NEW, readOnly = true) 를 사용한 재시도 로직 분리</li>
                                        <li>롤백된 트랜잭션과 독립적인 새 트랜잭션에서 안전하게 기존 사용자 재조회</li>
                                    </ul>
                                </div>
                                <div class="detail-section result">
                                    <h6><i class="fas fa-chart-line"></i> <strong>성과</strong></h6>
                                    <ul>
                                        <li>동시 로그인 요청 시에도 정확히 하나의 User만 생성 보장</li>
                                        <li>UNIQUE 제약 위반 감지 → 자동 재조회로 안정적 처리</li>
                                        <li>트랜잭션 분리로 롤백 상태와 무관하게 안전한 재시도 가능</li>
                                        <li>"DB 레벨과 애플리케이션 레벨에서 중복 계정 생성 방지</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-item">
                            <h5><i class="fas fa-envelope"></i> OAuth2 기반 이메일 OTP 인증 동시성 제어</h5>
                            <div class="optimization-details">
                                <div class="detail-section problem">
                                    <h6><i class="fas fa-exclamation-triangle"></i> <strong>문제상황</strong></h6>
                                    <ul>
                                        <li>동일 사용자가 재발급 버튼을 여러 번 동시에 클릭 시 인증코드 중복 생성</li>
                                        <li>여러 사용자의 동시 로그인/재발급 요청 시 이메일 검증 데이터 무결성 문제</li>
                                        <li>OTP 발송 및 검증 중 동시 요청으로 인한 데이터 손상 방지</li>
                                    </ul>
                                </div>
                                <div class="detail-section solution">
                                    <h6><i class="fas fa-wrench"></i> <strong>해결방법</strong></h6>
                                    <ul>
                                        <li>JPA @Version 필드를 통한 낙관적 잠금 구현</li>
                                        <li>이메일 인증/재전송 시 동시성 충돌 발생 시 지수 백오프 재시도 로직 구현 (최대 3회)</li>
                                        <li>OtpStatus (PENDING/VERIFIED/EXPIRED)으로 명확한 상태 관리</li>
                                    </ul>
                                </div>
                                <div class="detail-section result">
                                    <h6><i class="fas fa-chart-line"></i> <strong>성과</strong></h6>
                                    <ul>
                                        <li>동시 요청 시에도 정확히 하나의 유효한 PENDING OTP만 유지</li>
                                        <li>버전 충돌 감지 시 먼저 실행된 요청만 성공, 동시 요청은 롤백</li>
                                        <li>사용자별 독립적 처리로 다중 사용자 동시 접근 시 병렬 처리 가능</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-item">
                            <h5><i class="fas fa-at"></i> 이메일 발송 Rate Limiting 및 비동기 처리 구현</h5>
                            <div class="optimization-details">
                                <div class="detail-section problem">
                                    <h6><i class="fas fa-exclamation-triangle"></i> <strong>문제상황</strong></h6>
                                    <ul>
                                        <li>동일 사용자가 OTP 재발급 버튼을 반복적으로 클릭 시 제한 없이 이메일 무제한 발송</li>
                                        <li>악의적 사용자의 대량 이메일 발송으로 인한 서버 부하 증가</li>
                                        <li>모든 이메일 발송 요청 시 동기 처리로 인한 응답 지연</li>
                                    </ul>
                                </div>
                                <div class="detail-section solution">
                                    <h6><i class="fas fa-wrench"></i> <strong>해결방법</strong></h6>
                                    <ul>
                                        <li>Redis를 기반으로 한 시간당 10회 이메일 발송 제한 구현</li>
                                        <li>Redis에서 사용자별 발송 횟수 추적</li>
                                        <li>첫 발송 시만 TTL 1시간 설정으로 자동 초기화</li>
                                        <li>@Async 비동기 처리로 모든 이메일 발송 성능 개선</li>
                                    </ul>
                                </div>
                                <div class="detail-section result">
                                    <h6><i class="fas fa-chart-line"></i> <strong>성과</strong></h6>
                                    <ul>
                                        <li>4930ms → 120ms (응답 시간 49배 개선)</li>
                                        <li>사용자당 최대 10개/시간 제한으로 서버 리소스 보호</li>
                                        <li>Redis 만료 시간 자동 관리로 메모리 효율 개선</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-item">
                            <h5><i class="fas fa-money-check-alt"></i> 결제 시스템 동시성 제어 구현</h5>
                            <div class="optimization-details">
                                <div class="detail-section problem">
                                    <h6><i class="fas fa-exclamation-triangle"></i> <strong>문제상황</strong></h6>
                                    <ul>
                                        <li>한 사용자가 결제 생성 또는 승인 버튼을 중복 클릭 시 여러 번의 결제 트랜잭션 발생</li>
                                        <li>결제 생성 시 두 개 이상의 PENDING 상태 PayHistory 생성 가능</li>
                                        <li>결제 승인 시 같은 결제를 여러 번 KakaoPay API에 청구할 위험</li>
                                    </ul>
                                </div>
                                <div class="detail-section solution">
                                    <h6><i class="fas fa-wrench"></i> <strong>해결방법</strong></h6>
                                    <ul>
                                        <li>Repository에 비관적 락 쿼리 메서드 추가</li>
                                        <li>@Lock(LockModeType.PESSIMISTIC_WRITE) 적용하여 row 레벨 잠금</li>
                                        <li>결제 생성 메소드에서 PENDING 결제 조회 시 락 적용</li>
                                        <li>결제 승인 메소드에서 PayHistory 조회 시 락 적용</li>
                                        <li>상태 검증 후 KakaoPay API 호출 전까지 락 유지</li>
                                    </ul>
                                </div>
                                <div class="detail-section result">
                                    <h6><i class="fas fa-chart-line"></i> <strong>성과</strong></h6>
                                    <ul>
                                        <li>한 사용자의 중복 결제 생성 방지</li>
                                        <li>중복 결제 승인 요청 방지</li>
                                        <li>KakaoPay API 중복 호출 방지로 중복 청구 위험 제거</li>
                                        <li>DB 레벨 락으로 애플리케이션 로직 버그와 무관한 확실한 데이터 무결성 보장</li>
                                        <li>여러 사용자의 동시 결제는 각각 고유한 ID로 처리되어 상호 간섭 없음</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-item">
                            <h5><i class="fas fa-rocket"></i> CI/CD 파이프라인 성능 최적화 - 배포 시간 단축</h5>
                            <div class="optimization-details">
                                <div class="detail-section problem">
                                    <h6><i class="fas fa-exclamation-triangle"></i> <strong>문제상황</strong></h6>
                                    <ul>
                                        <li>GitHub Actions 배포 파이프라인이 총 6분 10초 소요</li>
                                        <li>docker job에서 4분 9초의 많은 시간 소비</li>
                                        <li>2-job 구조로 배포 실패 시 전체 파이프라인 재실행 필요</li>
                                    </ul>
                                </div>
                                <div class="detail-section solution">
                                    <h6><i class="fas fa-wrench"></i> <strong>해결방법</strong></h6>
                                    <ul>
                                        <li>워크플로우 3-job 구조로 분리 (build, docker, deploy)</li>
                                        <li>Docker Compose 활용으로 배포 스크립트 단축</li>
                                        <li>이미지 태그 동적 처리 (${IMAGE_TAG:-latest} 환경변수 기반)</li>
                                    </ul>
                                </div>
                                <div class="detail-section result">
                                    <h6><i class="fas fa-chart-line"></i> <strong>성과</strong></h6>
                                    <ul>
                                        <li>Build: 1분 54초 → 1분 47초 (-7초)</li>
                                        <li>Docker: 4분 9초 → 1분 33초 (-2분 36초로 62% 단축)</li>
                                        <li>Deploy: 26초 (신규 분리)</li>
                                        <li><strong>전체: 6분 10초 → 3분 54초 (36.7% 단축)</strong></li>
                                        <li>배포 실패 시 재시도 시간 10배 향상 (3분+ → 30초)</li>
                                        <li>job 분리로 명확한 실패 포인트 파악 가능</li>
                                        <li>Discord 자동 알림으로 배포 상태 실시간 확인 가능</li>
                                        <li>버전별 이미지 독립 관리로 롤백 가능</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <div class="challenge-item">
                            <h5><i class="fas fa-image"></i> WebP 이미지 변환을 통한 파일 용량 최적화</h5>
                            <div class="optimization-details">
                                <div class="detail-section problem">
                                    <h6><i class="fas fa-exclamation-triangle"></i> <strong>문제상황</strong></h6>
                                    <ul>
                                        <li>사용자가 업로드한 이미지가 원본 포맷(JPG, PNG) 그대로 저장되어 저장 공간 낭비</li>
                                        <li>대용량 이미지로 인한 네트워크 전송 시간 증가 및 사용자 데이터 소모</li>
                                        <li>고해상도 이미지 업로드 시 불필요한 저장 공간 사용</li>
                                    </ul>
                                </div>
                                <div class="detail-section solution">
                                    <h6><i class="fas fa-wrench"></i> <strong>해결방법</strong></h6>
                                    <ul>
                                        <li>업로드된 모든 이미지를 WebP 포맷으로 자동 변환</li>
                                        <li>최대 1920x1920 크기로 자동 리사이징하여 불필요한 고해상도 방지</li>
                                        <li>scrimage 라이브러리를 활용한 이미지 변환 및 압축</li>
                                    </ul>
                                </div>
                                <div class="detail-section result">
                                    <h6><i class="fas fa-chart-line"></i> <strong>성과</strong></h6>
                                    <ul>
                                        <li>이미지 용량 최대 96% 감소 (4.2MB → 190KB, 22배 절감)</li>
                                        <li>저장 공간 비용 절감 및 네트워크 전송 속도 향상</li>
                                        <li>사용자 데이터 소비량 감소로 모바일 환경 최적화</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <h4>Scheduler Architecture 구현</h4>
                    <div class="scheduler-section">
                        <h5>스케줄러 개요</h5>
                        <div class="scheduler-overview">
                            <div class="scheduler-info-box">
                                <strong><i class="fas fa-cogs"></i> Framework</strong>
                                <span>Spring Boot @Scheduled 기반</span>
                            </div>
                            <div class="scheduler-info-box">
                                <strong><i class="fas fa-sitemap"></i> Thread Pool</strong>
                                <span>10개 스레드로 동시성 관리</span>
                            </div>
                            <div class="scheduler-info-box">
                                <strong><i class="fas fa-server"></i> 배포</strong>
                                <span>멀티 모듈 독립 배포 (kkambbak-scheduler)</span>
                            </div>
                        </div>

                        <h5>구현 방식</h5>
                        <div class="feature-grid">
                            <div class="feature-card">
                                <h5><i class="fas fa-chart-line"></i> AOP 모니터링</h5>
                                <ul>
                                    <li>ScheduledTaskTracingAspect로 모든 작업 실행시간 측정 및 로깅</li>
                                </ul>
                            </div>
                            <div class="feature-card">
                                <h5><i class="fas fa-exclamation-circle"></i> 에러 처리</h5>
                                <ul>
                                    <li>ExceptionHandlingAspect로 예외 자동 포착 및 Discord 알림</li>
                                </ul>
                            </div>
                            <div class="feature-card">
                                <h5><i class="fas fa-filter"></i> 활성 사용자 필터링</h5>
                                <ul>
                                    <li>OnlyForActiveUserAspect로 활성 사용자만 대상 처리</li>
                                </ul>
                            </div>
                            <div class="feature-card">
                                <h5><i class="fas fa-link"></i> 외부 통합</h5>
                                <ul>
                                    <li>KakaoPayService, MailSender, DiscordClient등 외부 서비스 연동</li>
                                </ul>
                            </div>
                            <div class="feature-card">
                                <h5><i class="fas fa-tasks"></i> 배치 처리</h5>
                                <ul>
                                    <li>배치 실패 시 개별 처리로 폴백, 모든 성공/실패 결과를 Discord로 실시간 알림</li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <h4>브랜치 전략 (Branch Strategy)</h4>
                    <div class="info-box">
                        <p><i class="fas fa-code-branch"></i> Git Flow 전략을 기반으로 main/develop 브랜치 구조를 유지하고 develop에서 파생된 feature/*, fix/* 브랜치에서 기능 개발 후 PR을 통한 코드 리뷰를 거쳐 develop으로 Squash Merge합니다.<br><a href="https://github.com/kkam-bbak/kkambbak/blob/main/docs/branch-strategy.md" target="_blank" style="color: #0366d6; text-decoration: none;">자세히 보기 →</a></p>
                    </div>

                    <h4>커밋 컨벤션 (Commit Convention)</h4>
                    <div class="info-box">
                        <p><i class="fas fa-file-code"></i> <strong>&lt;타입&gt;: [ID] 요약</strong> 형식을 사용하고 Feat/Fix/Update/Refactor/Docs 등의 타입으로 커밋 목적을 명확히 합니다.<br>예시: <code style="background: #f0f0f0; padding: 0.2rem 0.4rem; border-radius: 4px;">Feat: [REQ-0001] 로그인 API 구현</code><br><a href="https://github.com/kkam-bbak/kkambbak/blob/main/docs/commit-convention.md" target="_blank" style="color: #0366d6; text-decoration: none;">자세히 보기 →</a></p>
                    </div>

                    <h4>성과 및 경험</h4>
                    <div class="challenge-list">
                        <div class="challenge-item">
                            <h5><i class="fas fa-user-tie"></i> 개발 팀장 리더십</h5>
                            <ul>
                                <li>백엔드 3명 팀 관리 및 기술 의사결정</li>
                                <li>Git Flow 기반 브랜치 전략 및 커밋 컨벤션 규칙 수립</li>
                                <li>프론트엔드 팀과의 협업 조율 및 커뮤니케이션</li>
                                <li>FE 팀원 탈주 시 프론트엔드 개발 지원으로 프로젝트 안정화</li>
                            </ul>
                        </div>
                        <div class="challenge-item">
                            <h5><i class="fas fa-server"></i> 인프라 구축</h5>
                            <ul>
                                <li>Naver Cloud Platform, Neon, Cloudflare R2 활용한 서버 배포 및 인프라 구축 및 관리</li>
                                <li>Discord 알림 시스템 구축 (결제 내역, 스케줄러 성공/실패, 배포 성공/실패, 운영서버 500에러 등)으로 개발자의 빠른 대응 및 업무 효율성 향상</li>
                                <li>Prometheus, Grafana, Loki, Promtail 기반 실시간 모니터링 시스템 구축으로 운영 안정성 확보</li>
                            </ul>
                        </div>
                        <div class="challenge-item">
                            <h5><i class="fas fa-lock"></i> 동시성 제어 및 데이터 무결성</h5>
                            <ul>
                                <li>비관적 락, 낙관적 락, 멱등성 검사를 통한 동시성 문제 해결</li>
                                <li>OAuth2 중복 계정 생성 방지 (UNIQUE 제약 + 예외 처리)</li>
                                <li>게스트 계정 업그레이드 동시성 제어 (비관적 락)</li>
                                <li>결제 시스템 중복 결제 방지 (비관적 락)</li>
                                <li>DB 레벨 + 애플리케이션 레벨 다층 방어로 데이터 무결성 보장</li>
                            </ul>
                        </div>
                        <div class="challenge-item">
                            <h5><i class="fas fa-rocket"></i> 성능 최적화</h5>
                            <ul>
                                <li>이메일 발송 응답 시간 98% 단축 (4930ms → 100ms)</li>
                                <li>비동기 처리로 메인 트랜잭션 응답 속도 개선</li>
                                <li>WebP 이미지 변환 및 리사이징으로 용량 최대 96% 감소 (4.2MB → 190KB, 22배 절감)</li>
                                <li>CI/CD 파이프라인 36.7% 단축 (6분 10초 → 3분 54초)</li>
                                <li>Docker 이미지 빌드 시간 62% 단축 (4분 9초 → 1분 33초)</li>
                            </ul>
                        </div>
                        <div class="challenge-item">
                            <h5><i class="fas fa-cubes"></i> 멀티모듈 아키텍처 설계</h5>
                            <ul>
                                <li>멀티모듈 구조로 관심사 분리 및 의존성 최소화</li>
                                <li>kkambbak-core, kkambbak-client, kkambbak, kkambbak-scheduler 4개 모듈 분리</li>
                                <li>Gradle api/implementation으로 필요한 의존성만 선택적 노출</li>
                                <li>새로운 기능 추가 시 기존 모듈 영향 최소화</li>
                                <li>실무 멀티모듈 프로젝트 운영으로 아키텍처 설계 역량 강화</li>
                            </ul>
                        </div>
                        <div class="challenge-item">
                            <h5><i class="fas fa-chart-line"></i> 모니터링 및 로깅</h5>
                            <ul>
                                <li>Prometheus, Loki, Grafana 통합으로 실시간 모니터링</li>
                                <li>Promtail을 통한 구조화된 로그 수집 및 중앙화</li>
                                <li>MDC를 활용한 멀티스레드 환경 동시성 문제 해결</li>
                                <li>필드별 정규식 마스킹으로 개인정보 보호</li>
                                <li>TraceID 기반 요청 추적 및 디버깅 효율성 향상</li>
                            </ul>
                        </div>
                        <div class="challenge-item">
                            <h5><i class="fas fa-lightbulb"></i> API 문서화</h5>
                            <ul>
                                <li>Spring RestDocs를 이용한 API 문서화 및 테스트 기반 개발</li>
                            </ul>
                        </div>
                    </div>

                    <div class="project-links">
                        <a href="https://github.com/kkam-bbak/kkambbak-backend" target="_blank">
                            <i class="fab fa-github"></i> Github
                        </a>
                        <a href="https://kkam-bbak.pages.dev" target="_blank" class="deployment-link">
                            <i class="fas fa-external-link-alt"></i> 서비스 바로가기
                        </a>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <script>
    fetch('../includes/menu.html')
        .then(response => response.text())
        .then(html => {
            document.getElementById('sidebar-placeholder').innerHTML = html;
        })
        .catch(error => console.error('Error loading sidebar:', error));
    </script>
</body>
</html>
